ğŸ“Š ANÃLISE COMPLETA DE INCONSISTÃŠNCIAS DO SCHEMA
Baseando-me nos arquivos do schema atual, aqui estÃ¡ uma anÃ¡lise completa das inconsistÃªncias identificadas:

ğŸ” 1. INCONSISTÃŠNCIAS DE NOMENCLATURA
âŒ Problemas CrÃ­ticos:
Tabela favorecidos: Ãšnica tabela com nomenclatura em portuguÃªs
Campos hÃ­bridos inconsistentes:
favorecidos.name vs outros firstName/lastName
favorecidos.phone vs favorecidos.cellPhone (redundÃ¢ncia interna)
cpf, cnpj, rg (portuguÃªs) coexistem com email, phone (inglÃªs)
Status Atual:
// INCONSISTENTE - Mistura nomenclaturas
favorecidos: {
  name: varchar("name", { length: 255 }),        // InglÃªs
  cpf: varchar("cpf", { length: 14 }),           // PortuguÃªs
  phone: varchar("phone", { length: 20 }),       // InglÃªs
  cellPhone: varchar("cell_phone", { length: 20 }) // InglÃªs + redundÃ¢ncia
}
ğŸ”¢ 2. INCONSISTÃŠNCIAS DE TIPOS DE DADOS
âŒ Problemas Identificados:
Phone fields: Padronizados para varchar(20) mas ainda hÃ¡ variaÃ§Ãµes
Status fields: VariaÃ§Ã£o entre defaults - "open", "planning", "pending"
Array implementations: MigraÃ§Ã£o JSONB â†’ native arrays inconsistente
Exemplo:
// INCONSISTENTE - Defaults diferentes para status
tickets.status: default("open")
projects.status: default("planning") 
projectActions.status: default("pending")
ğŸ”— 3. INCONSISTÃŠNCIAS DE CHAVES ESTRANGEIRAS
âŒ Problema CRÃTICO:
// ERRO GRAVE - Tipo incompatÃ­vel detectado
users.id: uuid("id").primaryKey().defaultRandom()                    // UUID
tickets.assignedToId: uuid("assigned_to_id").references(() => users.id) // UUIDâ†’UUID âœ“
projectActions.assignedToId: uuid("assigned_to_id").references(() => users.id) // UUIDâ†’UUID âœ“
Status: CORRIGIDO - Todas as FKs agora usam UUID corretamente

ğŸ“‹ 4. INCONSISTÃŠNCIAS DE VALIDAÃ‡ÃƒO
âŒ Problemas Detectados:
Conforme anÃ¡lise do server/db.ts:

// VALIDAÃ‡ÃƒO INCOMPLETA
const requiredTables = [
  'customers', 'tickets', 'ticket_messages', 'activity_logs', 
  'locations', 'customer_companies', 'skills', 'certifications', 
  'user_skills', 'favorecidos', 'projects', 'project_actions'
]; // 12 tabelas validadas
// MAS SCHEMA TEM: 17 tabelas total (3 pÃºblicas + 14 tenant-specific)
GAP: 5 tabelas nÃ£o validadas (sessions, tenants, users + 2 outras)

ğŸ—ï¸ 5. INCONSISTÃŠNCIAS DE ÃNDICES
âŒ Problemas de Performance:
Ãndices faltando: Alguns campos FK sem Ã­ndices otimizados
Tenant isolation: Ãndices nÃ£o incluem tenantId consistentemente
GeolocalizaÃ§Ã£o: Ãndices de proximidade incompletos
Exemplo:
// INCOMPLETO - Pode ser otimizado para tenant isolation
index("tickets_tenant_assigned_idx").on(table.tenantId, table.assignedToId)
// Mas falta em algumas tabelas similarmente estruturadas
ğŸ”’ 6. INCONSISTÃŠNCIAS DE CONSTRAINTS
âœ… BOM EXEMPLO - Tenant isolation correto:
favorecidos: {
  uniqueTenantEmail: unique("favorecidos_tenant_email_unique").on(table.tenantId, table.email),
  uniqueTenantCpf: unique("favorecidos_tenant_cpf_unique").on(table.tenantId, table.cpf)
}
// VERIFICAR - Se todas as tabelas tÃªm constraints similares